<!DOCTYPE html>
<html>
	<head>
		<!-- HTML boilerplate -->
		<meta charset="utf8"/>
		<title>Join (WebRTC via QR example)</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
		<link rel="icon" href="/favicon.ico"/>
		<!-- Petite Vue -->
		<script src="https://unpkg.com/petite-vue@0.4.1/dist/petite-vue.iife.js" defer init></script>
		<!-- Example script -->
		<script type="module">
			import { UserConnection } from "../"	// from "webrtc-via-qr"
			import QRCode from "qrcode"
			let u = new UserConnection()
			// Assume this page was opened from QR code (link like "localhost:5173/example/join.html?invite=...")
			let params = new URLSearchParams(window.location.search)
			let inviteCode = params.get("invite")
			console.assert(typeof inviteCode === "string" && inviteCode.length > 0, "Open this from QR code (missing URL param 'invite')")
			u.acceptInvite(inviteCode)
				.then(accept => {
					window.acc.textContent = accept
					QRCode.toCanvas(window.qr, accept)
				})
		</script>
	</head>
	<body v-scope>
		<p>Join</p>
		<p id="acc"></p>
		<canvas id="qr" style="max-width:300px;max-height:300px"></canvas>
	</body>
</html>
